(this["webpackJsonpdecision-tree"]=this["webpackJsonpdecision-tree"]||[]).push([[0],{105:function(t,e,n){},107:function(t,e,n){"use strict";n.r(e);var c,i=n(0),a=n.n(i),o=n(14),r=n.n(o),s=(n(93),n(11)),d=n(155),l=n(16),u=n(143),j=n(153),p=n(147),b=n(148),h=n(58),x=n.n(h),O=n(2),f=function(){return Object(O.jsx)("div",{className:x.a.root,children:Object(O.jsx)(u.a,{position:"static",children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(b.a,{variant:"h6",className:x.a.title,children:Object(O.jsx)(l.b,{to:"/",title:"Decision Tree App",children:"DTA"})}),Object(O.jsx)(j.a,{component:l.b,to:"/upload",color:"inherit",title:"Add new decision trees",children:"Add"}),Object(O.jsx)(j.a,{component:l.b,to:"/readme",color:"inherit",title:"README.md",children:"README"})]})})})},m=n(12),v=n(7),y=n(18),I=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},g=function(t,e){var n=t.find((function(t){return t.id===e}));if(!n)throw new Error("cannot find decision tree with id ".concat(e));return n},w=function(t,e,n){var c=g(t,e).steps[n];if(!c)throw new Error("cannot find step with id ".concat(n));return c};!function(t){t[t.InsertDT=0]="InsertDT",t[t.InsertDTs=1]="InsertDTs",t[t.UpsertConnection=2]="UpsertConnection",t[t.UpsertStep=3]="UpsertStep",t[t.Init=4]="Init"}(c||(c={}));var C,S=[],T=function(t,e){var n=function(e,n){return t.map((function(t){return t.id===e?n:t}))};switch(e.type){case c.InsertDT:var i=e.payload.dt;return[].concat(Object(m.a)(t),[i]);case c.InsertDTs:var a=e.payload.dts;return[].concat(Object(m.a)(t),Object(m.a)(a));case c.UpsertStep:var o=e.payload,r=o.dtId,s=o.step,d=g(t,r);return n(r,Object(y.a)(Object(y.a)({},d),{},Object(v.a)({},s.id,s)));case c.UpsertConnection:var l=e.payload,u=l.dtId,j=l.srcId,p=l.connection,b=w(t,u,j),h=function(t,e,n){var c=t.findIndex(e),i=Object(m.a)(t);return c>-1?i.splice(c,1,n):(i.push(n),i)}(b.connections,(function(t){return t.dstId===p.dstId}),p);return function(e,c){return n(e,Object(y.a)(Object(y.a)({},g(t,e)),{},Object(v.a)({},c.id,c)))}(u,Object(y.a)(Object(y.a)({},b),{},{connections:h}));default:return console.warn("bad action"),t}},D=Object(i.createContext)(null),k=function(t){var e=Object(i.useReducer)(T,S),n=Object(s.a)(e,2),c=n[0],o=n[1],r=a.a.useMemo((function(){return[c,o]}),[c,o]);return Object(O.jsx)(D.Provider,{value:r,children:t.children})},A=D,_=n(45),E=n.n(_),N=n(59),U=n(44),W=function(){var t=Object(N.a)(E.a.mark((function t(){var e,n,c,i,a,o,r=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"./samples/index.yaml",t.next=3,fetch(e).then((function(t){return t.text()}));case 3:return n=t.sent,c=U.a.load(n),i=c.map(function(){var t=Object(N.a)(E.a.mark((function t(e){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U.a,t.next=3,fetch(e.path).then((function(t){return t.text()}));case 3:return t.t1=t.sent,n=t.t0.load.call(t.t0,t.t1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8,Promise.allSettled(i);case 8:return a=t.sent,o=a.filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),console.log("Loaded ".concat(o.length," decision trees."),o),t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=n(8),F=n(68),M=n.n(F),R=n(149),J=n(151),z=n(150),L=n(66),P=n.n(L),Y="Continue",q=function(t){var e=t.connection;return Object(O.jsx)(j.a,{className:P.a.button,variant:"outlined",color:"primary",component:l.b,to:ut(t.dtId,e.dstId),children:I(e.text||Y)})},H=n(152),Q=function(t){var e=Object(i.useState)(t),n=Object(s.a)(e,2),c=n[0],a=n[1];return[c,a,function(t){var e=t.target;e&&a(Object(y.a)(Object(y.a)({},c),{},Object(v.a)({},e.name,e.value)))}]};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(C||(C={}));var V,$=function(t){var e=Object(i.useContext)(A)[1],n=t.step?{id:t.step.id,text:t.step.text}:{id:"",text:""},a=Q(n),o=Object(s.a)(a,3),r=o[0],d=(o[1],o[2]);return Object(O.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),r.id){var i={id:r.id,text:r.text,connections:t.step?t.step.connections:[]};e({type:c.UpsertStep,payload:{dtId:t.dtId,step:i}})}},noValidate:!0,autoComplete:"off",children:[Object(O.jsx)("div",{children:Object(O.jsx)(H.a,{id:"standard-basic",label:"ID",name:"id",value:r.id,onChange:d})}),Object(O.jsx)("div",{children:Object(O.jsx)(H.a,{id:"standard-basic",label:"Text",name:"text",value:r.text,onChange:d})}),Object(O.jsx)(j.a,{type:"submit",children:"Submit"})]})},K=n(67),X=n.n(K),Z=function(t){var e=t.step,n=Object(i.useState)(!1),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)(R.a,{children:[Object(O.jsxs)(z.a,{children:[Object(O.jsxs)(b.a,{className:"span",color:"textSecondary",gutterBottom:!0,children:["id: ",e.id]}),Object(O.jsx)(b.a,{component:"h2",variant:"h5",children:I(e.text)})]}),Object(O.jsxs)(J.a,{className:X.a.grid,children:[e.connections.map((function(e){return Object(O.jsx)(q,{connection:e,dtId:t.dtId},e.dstId)})),Object(O.jsx)(j.a,{className:"mutation",onClick:function(){return o((function(t){return!t}))},children:"Edit Step"})]})]}),a&&Object(O.jsx)($,{type:C.Edit,dtId:t.dtId,step:t.step})]})};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(V||(V={}));var G=function(t){var e=Object(i.useContext)(A)[1],n=t.initialState||{id:"",text:"",conText:""},a=Q(n),o=Object(s.a)(a,3),r=o[0],d=o[1],l=o[2];return Object(O.jsxs)("form",{onSubmit:t.type===V.Add?function(i){if(i.preventDefault(),r.id){var a={id:r.id,text:r.text,connections:[]},o={dstId:a.id,text:r.conText};e({type:c.UpsertStep,payload:{dtId:t.dtId,step:a}}),e({type:c.UpsertConnection,payload:{dtId:t.dtId,connection:o,srcId:t.parentStepId}}),d(n)}}:function(t){t.preventDefault()},noValidate:!0,autoComplete:"off",children:[Object(O.jsx)("div",{children:Object(O.jsx)(H.a,{id:"standard-basic",label:"ID",name:"id",value:r.id,onChange:l})}),Object(O.jsx)("div",{children:Object(O.jsx)(H.a,{id:"standard-basic",label:"Text",name:"text",value:r.text,onChange:l})}),Object(O.jsx)("div",{children:Object(O.jsx)(H.a,{id:"standard-basic",label:"Connection Text",name:"conText",value:r.conText,onChange:l})}),Object(O.jsx)(j.a,{type:"submit",children:"Submit"})]})},tt=function(){var t=Object(B.g)(),e=t.dtId,n=t.stepId,c=Object(i.useContext)(A),a=Object(s.a)(c,1)[0],o=Object(i.useState)(!1),r=Object(s.a)(o,2),d=r[0],u=r[1];if(!e)return null;var p=w(a,e,n||"root");return Object(O.jsxs)("div",{children:[Object(O.jsx)(Z,{dtId:e,step:p}),Object(O.jsxs)("div",{style:{marginTop:"1rem"},className:"center-children",children:[Object(O.jsx)(j.a,{component:l.b,to:ut(e,"root"),endIcon:Object(O.jsx)(M.a,{}),children:"Reset"}),Object(O.jsx)(j.a,{className:"mutation",disabled:!0,children:"Add Connection"}),Object(O.jsx)(j.a,{className:"mutation",onClick:function(){return u((function(t){return!t}))},children:"Add Step"}),d&&Object(O.jsx)(G,{type:V.Add,dtId:e,parentStepId:p.id})]})]})},et=n(76),nt=(n(105),function(){return Object(O.jsx)("div",{className:"readme",children:Object(O.jsx)("article",{children:Object(O.jsx)(et.a,{source:"# Decision Tree App\n\n## What is a decision tree?\n\nA decision tree (DT) is a decision support tool that uses a tree-like model of decisions and\ntheir possible consequences, including chance event outcomes, resource costs, and utility.\nIt is one way to display an algorithm that only contains conditional control statements.\n([read more](https://en.wikipedia.org/wiki/Decision_tree))\n\nHere is a quick examlpe: The diagram below shows a decision tree which predicts how\nto make the journey to work (\"Journey to Work\")\n\n[![journey to work decision tree](/images/journey-to-work.png)](/dt/work-journey)\n\n\n## Entities\nEach decision tree here is made up of nodes (leaf) and connections (branch)\n\n\n## Examples\nCurrently this web app is in a read only mode. You can load in new decision trees by writing\n[YAML](https://github.com/Animosity/CraftIRC/wiki/Complete-idiot%27s-introduction-to-yaml) specifications\nand using the [upload form here](/upload).\n\nBelow is how the cat DT example is added.\n\n```\ntitle: cat\ndescription: my cat's thought process\nsteps:\n  root:\n    text: Is that for me?\n    connections:\n      - dstId: noCare\n        text: yes\n      - dstId: youWrong\n        text: no.\n  noCare:\n    text: I don't want it.\n  youWrong:\n    text: That's for me.\n```\n\n## TODO list\n\n- [ ] mermaid.js for visualizing trees\n- [ ] need a name\n- [ ] add a more sohpisticated dt.\n- [ ] auto list samples in upload.\n- [ ] description on homepage?\n- [x] mobile friendly\n  - use native CSS grids\n- [x] add real id to DT\n- load from (yaml/json) file\n- [x] add data loading\n- [ ] add tooling to create new DT (CLI or UI)\n- [x] improve state management\n- [ ] improve UI\n  - [x] mobile ready\n  - material-ui\n- better connection/DT visualization\n- [ ] re-enable mutations\n  - editing steps and connections\n  - adding steps and connections\n",escapeHtml:!1})})})}),ct=function(t){return Object(O.jsx)(R.a,{className:"root",children:Object(O.jsx)(l.b,{to:ut(t.dtId,"root"),children:Object(O.jsxs)(z.a,{children:[Object(O.jsx)(b.a,{className:"title",color:"textSecondary",gutterBottom:!0,children:I(t.dt.title)}),Object(O.jsx)(b.a,{component:"h2",variant:"h5",children:I(t.dt.description)})]})})})},it=n(72),at=n.n(it),ot=function(){var t=Object(i.useContext)(A),e=Object(s.a)(t,1)[0];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Is this your first time here and don't know what a decision tree is?"," "," Take a look at our README page."]}),Object(O.jsx)("div",{className:at.a.grid,children:e.map((function(t,e){return Object(O.jsx)(ct,{dt:t,dtId:t.id},e)}))})]})},rt=n(73),st=n(74),dt=n.n(st),lt=function(){var t=Object(i.useContext)(A)[1],e=Object(i.useState)(""),n=Object(s.a)(e,2),a=n[0],o=n[1],r=Object(i.useState)(""),d=Object(s.a)(r,2),u=d[0],p=d[1];return Object(O.jsxs)("div",{className:dt.a.base,children:[u&&Object(O.jsx)("p",{children:u}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Find sample YAML files here:"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/samples/cat.yaml",target:"_blank",children:"cat.yaml"})}),Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/samples/dog.yaml",target:"_blank",children:"dog.yaml"})})]})]}),Object(O.jsxs)("form",{className:"center-children",children:[Object(O.jsx)("input",{accept:".json,.yaml",hidden:!0,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){var n=e.target,i=new FileReader;if(n.files&&n.files.length>0){var a=n.files[0];a.name.endsWith(".json")||a.name.endsWith(".yaml")?(i.onload=function(e){var n=e.target.result;try{n=a.name.endsWith(".yaml")?U.a.load(n):JSON.parse(n),n=Object(rt.validateAndSetup)(n)}catch(e){return console.error(e),void p("Failed to add the decisoin tree, check the specifications.")}var i=n;o(JSON.stringify(n,null,2)),function(e){t({type:c.InsertDT,payload:{dt:e}})}(i),p("Decision tree added.")},i.readAsText(a)):p("Unsupported file. JSON & YAML are the only supported formats.")}}}),Object(O.jsx)("label",{htmlFor:"contained-button-file",children:Object(O.jsx)(j.a,{variant:"contained",color:"primary",component:"span",children:"Upload"})})]}),a&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("hr",{}),Object(O.jsx)("pre",{children:a})]})]})},ut=function(t,e){return"/dt/".concat(t,"/step/").concat(e)},jt=function(){return Object(O.jsxs)(B.c,{children:[Object(O.jsx)(B.a,{path:"/readme",element:Object(O.jsx)(nt,{})}),Object(O.jsx)(B.a,{element:Object(O.jsx)(ot,{}),path:"/"}),Object(O.jsx)(B.a,{element:Object(O.jsx)(lt,{}),path:"/upload"}),Object(O.jsx)(B.a,{element:Object(O.jsx)(tt,{}),path:"/follow/dt/:dtId/step/:stepId"}),Object(O.jsx)(B.a,{element:Object(O.jsx)(tt,{}),path:"/follow/:dtId"}),Object(O.jsx)(B.a,{element:Object(O.jsx)(tt,{}),path:"/dt/:dtId/step/:stepId"}),Object(O.jsx)(B.a,{element:Object(O.jsx)(tt,{}),path:"/dt/:dtId/"})]})},pt=n(75),bt=n.n(pt),ht=function(){var t=Object(i.useContext)(A)[1],e=Object(i.useState)(""),n=Object(s.a)(e,2),a=n[0],o=n[1];return Object(i.useEffect)((function(){W().then((function(e){t({type:c.InsertDTs,payload:{dts:e}})})).catch((function(){o("failed to load intial decistion trees")}))}),[t]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f,{}),Object(O.jsxs)("div",{className:bt.a.content,children:[Object(O.jsx)(d.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!a,autoHideDuration:6e3,message:a}),Object(O.jsx)(jt,{})]})]})},xt=function(){return Object(O.jsx)(l.a,{basename:"",children:Object(O.jsx)(k,{children:Object(O.jsx)(ht,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(O.jsx)(xt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},58:function(t,e,n){t.exports={root:"NavBar_root__33QtF",title:"NavBar_title__3wIk0"}},66:function(t,e,n){t.exports={button:"Connection_button__2jUvQ"}},67:function(t,e,n){t.exports={grid:"Step_grid__1qgaB"}},72:function(t,e,n){t.exports={grid:"Trees_grid__2Z_-A"}},73:function(t,e){t.exports={validateAndSetup:function(t){var e=new Error("bad schema");if(void 0!==["id","title","description","steps"].find((function(e){return!t.hasOwnProperty(e)})))throw e;if("object"!==typeof t.steps)throw e;if(void 0===t.steps.root)throw e;if(!t.id.match(/^[a-z0-9]+(?:-[a-z0-9]+)*$/))throw e;return Object.keys(t.steps).forEach((function(n){if(t.steps[n].connections=t.steps[n].connections||[],t.steps[n].id=n,void 0!==["id","text","connections"].find((function(e){return!t.steps[n].hasOwnProperty(e)})))throw e;t.steps[n].connections.forEach((function(n){if(void 0!==["dstId"].find((function(t){return!n.hasOwnProperty(t)})))throw e;if(!(n.dstId in t.steps))throw e}))})),t}}},74:function(t,e,n){t.exports={base:"Upload_base__2TmXW"}},75:function(t,e,n){t.exports={content:"App_content__1Wt3K"}},93:function(t,e,n){}},[[107,1,2]]]);