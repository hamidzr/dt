(this["webpackJsonpdecision-tree"]=this["webpackJsonpdecision-tree"]||[]).push([[0],{105:function(t,e,n){},107:function(t,e,n){"use strict";n.r(e);var c,i=n(0),a=n.n(i),o=n(14),r=n.n(o),s=(n(93),n(15)),d=n(10),l=n(155),u=n(17),j=n(143),p=n(153),b=n(147),h=n(148),x=n(58),f=n.n(x),O=n(2),m=function(){return Object(O.jsx)("div",{className:f.a.root,children:Object(O.jsx)(j.a,{position:"static",children:Object(O.jsxs)(b.a,{children:[Object(O.jsx)(h.a,{variant:"h6",className:f.a.title,children:Object(O.jsx)(u.b,{to:"/",title:"Decision Tree App",children:"DTA"})}),Object(O.jsx)(p.a,{component:u.b,to:"/upload",color:"inherit",title:"Add new decision trees",children:"Add"}),Object(O.jsx)(p.a,{component:u.b,to:"/readme",color:"inherit",title:"README.md",children:"README"})]})})})},v=n(12),y=n(7),g=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},I=function(t,e){var n=t.find((function(t){return t.id===e}));if(!n)throw new Error("cannot find decision tree with id ".concat(e));return n},w=function(t,e,n){var c=I(t,e).steps[n];if(!c)throw new Error("cannot find step with id ".concat(n));return c};!function(t){t[t.InsertDT=0]="InsertDT",t[t.InsertDTs=1]="InsertDTs",t[t.UpsertConnection=2]="UpsertConnection",t[t.UpsertStep=3]="UpsertStep",t[t.Init=4]="Init"}(c||(c={}));var C,S=[],T=function(t,e){var n=function(e,n){return t.map((function(t){return t.id===e?n:t}))};switch(e.type){case c.InsertDT:var i=e.payload.dt;return[].concat(Object(v.a)(t),[i]);case c.InsertDTs:var a=e.payload.dts;return[].concat(Object(v.a)(t),Object(v.a)(a));case c.UpsertStep:var o=e.payload,r=o.dtId,d=o.step,l=I(t,r);return n(r,Object(s.a)(Object(s.a)({},l),{},Object(y.a)({},d.id,d)));case c.UpsertConnection:var u=e.payload,j=u.dtId,p=u.srcId,b=u.connection,h=w(t,j,p),x=function(t,e,n){var c=t.findIndex(e),i=Object(v.a)(t);return c>-1?i.splice(c,1,n):(i.push(n),i)}(h.connections,(function(t){return t.dstId===b.dstId}),b);return function(e,c){return n(e,Object(s.a)(Object(s.a)({},I(t,e)),{},Object(y.a)({},c.id,c)))}(j,Object(s.a)(Object(s.a)({},h),{},{connections:x}));default:return console.warn("bad action"),t}},D=Object(i.createContext)(null),k=function(t){var e=Object(i.useReducer)(T,S),n=Object(d.a)(e,2),c=n[0],o=n[1],r=a.a.useMemo((function(){return[c,o]}),[c,o]);return Object(O.jsx)(D.Provider,{value:r,children:t.children})},A=D,_=n(45),E=n.n(_),N=n(59),U=n(44),W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t&&F(t)?t:B()+t},B=function(){return"".concat(window.location.protocol,"//").concat(window.location.host)},F=function(t){return t.startsWith("http")},L=function(){var t=Object(N.a)(E.a.mark((function t(){var e,n,c,i,a,o,r=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"/samples/index.yaml",t.next=3,fetch(W(e)).then((function(t){return t.text()}));case 3:return n=t.sent,c=U.a.load(n),i=c.map(function(){var t=Object(N.a)(E.a.mark((function t(e){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U.a,t.next=3,fetch(W(e.path)).then((function(t){return t.text()}));case 3:return t.t1=t.sent,n=t.t0.load.call(t.t0,t.t1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8,Promise.allSettled(i);case 8:return a=t.sent,o=a.filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=n(8),R=n(68),J=n.n(R),z=n(149),P=n(151),Y=n(150),q=n(66),H=n.n(q),Q="Continue",V=function(t){var e=t.connection;return Object(O.jsx)(p.a,{className:H.a.button,variant:"outlined",color:"primary",component:u.b,to:bt(t.dtId,e.dstId),children:g(e.text||Q)})},$=n(152),K=function(t){var e=Object(i.useState)(t),n=Object(d.a)(e,2),c=n[0],a=n[1];return[c,a,function(t){var e=t.target;e&&a(Object(s.a)(Object(s.a)({},c),{},Object(y.a)({},e.name,e.value)))}]};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(C||(C={}));var X,Z=function(t){var e=Object(i.useContext)(A)[1],n=t.step?{id:t.step.id,text:t.step.text}:{id:"",text:""},a=K(n),o=Object(d.a)(a,3),r=o[0],s=(o[1],o[2]);return Object(O.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),r.id){var i={id:r.id,text:r.text,connections:t.step?t.step.connections:[]};e({type:c.UpsertStep,payload:{dtId:t.dtId,step:i}})}},noValidate:!0,autoComplete:"off",children:[Object(O.jsx)("div",{children:Object(O.jsx)($.a,{id:"standard-basic",label:"ID",name:"id",value:r.id,onChange:s})}),Object(O.jsx)("div",{children:Object(O.jsx)($.a,{id:"standard-basic",label:"Text",name:"text",value:r.text,onChange:s})}),Object(O.jsx)(p.a,{type:"submit",children:"Submit"})]})},G=n(67),tt=n.n(G),et=function(t){var e=t.step,n=Object(i.useState)(!1),c=Object(d.a)(n,2),a=c[0],o=c[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)(z.a,{children:[Object(O.jsxs)(Y.a,{children:[Object(O.jsxs)(h.a,{className:"span",color:"textSecondary",gutterBottom:!0,children:["id: ",e.id]}),Object(O.jsx)(h.a,{component:"h2",variant:"h5",children:g(e.text)})]}),Object(O.jsxs)(P.a,{className:tt.a.grid,children:[e.connections.map((function(e){return Object(O.jsx)(V,{connection:e,dtId:t.dtId},e.dstId)})),Object(O.jsx)(p.a,{className:"mutation",onClick:function(){return o((function(t){return!t}))},children:"Edit Step"})]})]}),a&&Object(O.jsx)(Z,{type:C.Edit,dtId:t.dtId,step:t.step})]})};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(X||(X={}));var nt=function(t){var e=Object(i.useContext)(A)[1],n=t.initialState||{id:"",text:"",conText:""},a=K(n),o=Object(d.a)(a,3),r=o[0],s=o[1],l=o[2];return Object(O.jsxs)("form",{onSubmit:t.type===X.Add?function(i){if(i.preventDefault(),r.id){var a={id:r.id,text:r.text,connections:[]},o={dstId:a.id,text:r.conText};e({type:c.UpsertStep,payload:{dtId:t.dtId,step:a}}),e({type:c.UpsertConnection,payload:{dtId:t.dtId,connection:o,srcId:t.parentStepId}}),s(n)}}:function(t){t.preventDefault()},noValidate:!0,autoComplete:"off",children:[Object(O.jsx)("div",{children:Object(O.jsx)($.a,{id:"standard-basic",label:"ID",name:"id",value:r.id,onChange:l})}),Object(O.jsx)("div",{children:Object(O.jsx)($.a,{id:"standard-basic",label:"Text",name:"text",value:r.text,onChange:l})}),Object(O.jsx)("div",{children:Object(O.jsx)($.a,{id:"standard-basic",label:"Connection Text",name:"conText",value:r.conText,onChange:l})}),Object(O.jsx)(p.a,{type:"submit",children:"Submit"})]})},ct=function(){var t=Object(M.g)(),e=t.dtId,n=t.stepId,c=Object(i.useContext)(A),a=Object(d.a)(c,1)[0],o=Object(i.useState)(!1),r=Object(d.a)(o,2),s=r[0],l=r[1];if(!e)return null;var j=w(a,e,n||"root");return Object(O.jsxs)("div",{children:[Object(O.jsx)(et,{dtId:e,step:j}),Object(O.jsxs)("div",{style:{marginTop:"1rem"},className:"center-children",children:[Object(O.jsx)(p.a,{component:u.b,to:bt(e,"root"),endIcon:Object(O.jsx)(J.a,{}),children:"Reset"}),Object(O.jsx)(p.a,{className:"mutation",disabled:!0,children:"Add Connection"}),Object(O.jsx)(p.a,{className:"mutation",onClick:function(){return l((function(t){return!t}))},children:"Add Step"}),s&&Object(O.jsx)(nt,{type:X.Add,dtId:e,parentStepId:j.id})]})]})},it=n(76),at=(n(105),function(){return Object(O.jsx)("div",{className:"readme",children:Object(O.jsx)("article",{children:Object(O.jsx)(it.a,{source:"# Decision Tree App\n\n## What is a decision tree?\n\nA decision tree (DT) is a decision support tool that uses a tree-like model of decisions and\ntheir possible consequences, including chance event outcomes, resource costs, and utility.\nIt is one way to display an algorithm that only contains conditional control statements.\n([read more](https://en.wikipedia.org/wiki/Decision_tree))\n\nHere is a quick examlpe: The diagram below shows a decision tree which predicts how\nto make the journey to work (\"Journey to Work\")\n\n[![journey to work decision tree](/images/journey-to-work.png)](/dt/work-journey)\n\n\n## Entities\nEach decision tree here is made up of nodes (leaf) and connections (branch)\n\n\n## Examples\nCurrently this web app is in a read only mode. You can load in new decision trees by writing\n[YAML](https://github.com/Animosity/CraftIRC/wiki/Complete-idiot%27s-introduction-to-yaml) specifications\nand using the [upload form here](/upload).\n\nBelow is how the cat DT example is added.\n\n```\ntitle: cat\ndescription: my cat's thought process\nsteps:\n  root:\n    text: Is that for me?\n    connections:\n      - dstId: noCare\n        text: yes\n      - dstId: youWrong\n        text: no.\n  noCare:\n    text: I don't want it.\n  youWrong:\n    text: That's for me.\n```\n\n## TODO list\n\n- [ ] mermaid.js for visualizing trees\n- [ ] need a name\n- [ ] add a more sohpisticated dt.\n- [ ] auto list samples in upload.\n- [ ] description on homepage?\n- [x] mobile friendly\n  - use native CSS grids\n- [x] add real id to DT\n- load from (yaml/json) file\n- [x] add data loading\n- [ ] add tooling to create new DT (CLI or UI)\n- [x] improve state management\n- [ ] improve UI\n  - [x] mobile ready\n  - material-ui\n- better connection/DT visualization\n- [ ] re-enable mutations\n  - editing steps and connections\n  - adding steps and connections\n",escapeHtml:!1})})})}),ot=function(t){return Object(O.jsx)(z.a,{className:"root",children:Object(O.jsx)(u.b,{to:bt(t.dtId,"root"),children:Object(O.jsxs)(Y.a,{children:[Object(O.jsx)(h.a,{className:"title",color:"textSecondary",gutterBottom:!0,children:g(t.dt.title)}),Object(O.jsx)(h.a,{component:"h2",variant:"h5",children:g(t.dt.description)})]})})})},rt=n(72),st=n.n(rt),dt=function(){var t=Object(i.useContext)(A),e=Object(d.a)(t,1)[0];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Is this your first time here and don't know what a decision tree is?"," "," Take a look at our README page."]}),Object(O.jsx)("div",{className:st.a.grid,children:e.map((function(t,e){return Object(O.jsx)(ot,{dt:t,dtId:t.id},e)}))})]})},lt=n(73),ut=n(74),jt=n.n(ut),pt=function(){var t=Object(i.useContext)(A)[1],e=Object(i.useState)(""),n=Object(d.a)(e,2),a=n[0],o=n[1],r=Object(i.useState)(""),s=Object(d.a)(r,2),l=s[0],j=s[1];return Object(O.jsxs)("div",{className:jt.a.base,children:[l&&Object(O.jsx)("p",{children:l}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Find sample YAML files here:"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(u.b,{to:"/samples/cat.yaml",target:"_blank",children:"cat.yaml"})}),Object(O.jsx)("li",{children:Object(O.jsx)(u.b,{to:"/samples/dog.yaml",target:"_blank",children:"dog.yaml"})})]})]}),Object(O.jsxs)("form",{className:"center-children",children:[Object(O.jsx)("input",{accept:".json,.yaml",hidden:!0,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){var n=e.target,i=new FileReader;if(n.files&&n.files.length>0){var a=n.files[0];a.name.endsWith(".json")||a.name.endsWith(".yaml")?(i.onload=function(e){var n=e.target.result;try{n=a.name.endsWith(".yaml")?U.a.load(n):JSON.parse(n),n=Object(lt.validateAndSetup)(n)}catch(e){return console.error(e),void j("Failed to add the decisoin tree, check the specifications.")}var i=n;o(JSON.stringify(n,null,2)),function(e){t({type:c.InsertDT,payload:{dt:e}})}(i),j("Decision tree added.")},i.readAsText(a)):j("Unsupported file. JSON & YAML are the only supported formats.")}}}),Object(O.jsx)("label",{htmlFor:"contained-button-file",children:Object(O.jsx)(p.a,{variant:"contained",color:"primary",component:"span",children:"Upload"})})]}),a&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("hr",{}),Object(O.jsx)("pre",{children:a})]})]})},bt=function(t,e){return"/dt/".concat(t,"/step/").concat(e)},ht=function(){return Object(O.jsxs)(M.c,{children:[Object(O.jsx)(M.a,{path:"/readme",element:Object(O.jsx)(at,{})}),Object(O.jsx)(M.a,{element:Object(O.jsx)(dt,{}),path:"/"}),Object(O.jsx)(M.a,{element:Object(O.jsx)(pt,{}),path:"/upload"}),Object(O.jsx)(M.a,{element:Object(O.jsx)(ct,{}),path:"/follow/dt/:dtId/step/:stepId"}),Object(O.jsx)(M.a,{element:Object(O.jsx)(ct,{}),path:"/follow/:dtId"}),Object(O.jsx)(M.a,{element:Object(O.jsx)(ct,{}),path:"/dt/:dtId/step/:stepId"}),Object(O.jsx)(M.a,{element:Object(O.jsx)(ct,{}),path:"/dt/:dtId/"})]})},xt=n(75),ft=n.n(xt),Ot=function(){var t=Object(i.useContext)(A),e=Object(d.a)(t,2),n=e[0],a=e[1],o=Object(i.useState)({err:"",isLoading:!0}),r=Object(d.a)(o,2),u=r[0],j=r[1];return Object(i.useEffect)((function(){L().then((function(t){a({type:c.InsertDTs,payload:{dts:t}})})).catch((function(t){console.error(t),j((function(t){return Object(s.a)(Object(s.a)({},t),{},{err:"failed to load intial decistion trees"})}))})).finally((function(){j((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1})}))}))}),[a]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{}),Object(O.jsxs)("div",{className:ft.a.content,children:[Object(O.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!u.err,autoHideDuration:6e3,message:u.err}),0===n.length?"Loading":Object(O.jsx)(ht,{})]})]})},mt=function(){return Object(O.jsx)(u.a,{basename:"",children:Object(O.jsx)(k,{children:Object(O.jsx)(Ot,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(O.jsx)(mt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},58:function(t,e,n){t.exports={root:"NavBar_root__33QtF",title:"NavBar_title__3wIk0"}},66:function(t,e,n){t.exports={button:"Connection_button__2jUvQ"}},67:function(t,e,n){t.exports={grid:"Step_grid__1qgaB"}},72:function(t,e,n){t.exports={grid:"Trees_grid__2Z_-A"}},73:function(t,e){t.exports={validateAndSetup:function(t){var e=new Error("bad schema");if(void 0!==["id","title","description","steps"].find((function(e){return!t.hasOwnProperty(e)})))throw e;if("object"!==typeof t.steps)throw e;if(void 0===t.steps.root)throw e;if(!t.id.match(/^[a-z0-9]+(?:-[a-z0-9]+)*$/))throw e;return Object.keys(t.steps).forEach((function(n){if(t.steps[n].connections=t.steps[n].connections||[],t.steps[n].id=n,void 0!==["id","text","connections"].find((function(e){return!t.steps[n].hasOwnProperty(e)})))throw e;t.steps[n].connections.forEach((function(n){if(void 0!==["dstId"].find((function(t){return!n.hasOwnProperty(t)})))throw e;if(!(n.dstId in t.steps))throw e}))})),t}}},74:function(t,e,n){t.exports={base:"Upload_base__2TmXW"}},75:function(t,e,n){t.exports={content:"App_content__1Wt3K"}},93:function(t,e,n){}},[[107,1,2]]]);