(this["webpackJsonpdecision-tree"]=this["webpackJsonpdecision-tree"]||[]).push([[0],{107:function(t,e,n){},109:function(t,e,n){"use strict";n.r(e);var i,o=n(0),r=n.n(o),c=n(14),a=n.n(c),s=(n(95),n(15)),d=n(11),l=n(157),u=n(17),j=n(145),p=n(155),b=n(149),h=n(150),f=n(61),O=n.n(f),x=n(2),m=function(){return Object(x.jsx)("div",{className:O.a.root,children:Object(x.jsx)(j.a,{position:"static",children:Object(x.jsxs)(b.a,{children:[Object(x.jsx)(h.a,{variant:"h6",className:O.a.title,children:Object(x.jsx)(u.b,{to:"/",title:"Decision Tree App",children:"DTA"})}),Object(x.jsx)(p.a,{component:u.b,to:"/upload",color:"inherit",title:"Add new decision trees",children:"Add"}),Object(x.jsx)(p.a,{component:u.b,to:"/readme",color:"inherit",title:"README.md",children:"README"})]})})})},v=n(10),y=n(7),g=(n(22),n(46),n(35)),w=function(t){t.forEach((function(t){window.localStorage.setItem("dts/"+t.id,JSON.stringify(t))}))},I=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},S=function(t,e){var n=t.find((function(t){return t.id===e}));if(!n)throw new Error("cannot find decision tree with id ".concat(e));return n},C=function(t,e,n){var i=S(t,e).steps[n];if(!i)throw new Error("cannot find step with id ".concat(n));return i.id||(i.id=n),i};!function(t){t[t.InsertDT=0]="InsertDT",t[t.InsertDTs=1]="InsertDTs",t[t.UpsertConnection=2]="UpsertConnection",t[t.UpsertStep=3]="UpsertStep",t[t.Init=4]="Init"}(i||(i={}));var T,A=function(){var t=[];for(var e in window.localStorage)if(e.startsWith("dts/")){var n=window.localStorage.getItem(e);t.push(Object(g.validateAndSetup)(JSON.parse(n)))}return t}().sort((function(t,e){return t.id.localeCompare(e.id)})),D=function(t,e){var n=function(e,n){return t.map((function(t){return t.id===e?n:t}))},o=function(e,n){var i={};n.sort((function(t,e){return t.id.localeCompare(e.id)})),n.forEach((function(t){i[t.id]=!0}));var o=[].concat(Object(v.a)(t.filter((function(t){return!0!==i[t.id]}))),Object(v.a)(n));return w(o),o};switch(e.type){case i.InsertDT:return o(0,[e.payload.dt]);case i.InsertDTs:return o(0,e.payload.dts);case i.UpsertStep:var r=e.payload,c=r.dtId,a=r.step,d=S(t,c),l=n(c,Object(s.a)(Object(s.a)({},d),{},Object(y.a)({},a.id,a)));return w(l),l;case i.UpsertConnection:var u=e.payload,j=u.dtId,p=u.srcId,b=u.connection,h=C(t,j,p),f=function(t,e,n){var i=t.findIndex(e),o=Object(v.a)(t);return i>-1?o.splice(i,1,n):(o.push(n),o)}(h.connections,(function(t){return t.dstId===b.dstId}),b),O=function(e,i){return n(e,Object(s.a)(Object(s.a)({},S(t,e)),{},Object(y.a)({},i.id,i)))}(j,Object(s.a)(Object(s.a)({},h),{},{connections:f}));return w(O),O;default:return console.warn("bad action"),t}},k=Object(o.createContext)(null),_=function(t){var e=Object(o.useReducer)(D,A),n=Object(d.a)(e,2),i=n[0],c=n[1],a=r.a.useMemo((function(){return[i,c]}),[i,c]);return Object(x.jsx)(k.Provider,{value:a,children:t.children})},E=k,N=n(48),U=n.n(N),W=n(62),B=n(47),J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t&&L(t)?t:F()+t},F=function(){return"".concat(window.location.protocol,"//").concat(window.location.host)},L=function(t){return t.startsWith("http")},M=function(t){var e=B.a.load(t);return Object(g.validateAndSetup)(e)},R=function(){var t=Object(W.a)(U.a.mark((function t(){var e,n,i,o,r,c,a=arguments;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"/samples/index.yaml",t.next=3,fetch(J(e)).then((function(t){return t.text()}));case 3:return n=t.sent,i=B.a.load(n),o=i.map(function(){var t=Object(W.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=M,t.next=3,fetch(J(e.path)).then((function(t){return t.text()}));case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8,Promise.allSettled(o);case 8:return r=t.sent,c=r.filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=n(8),P=n(71),Y=n.n(P),q=n(151),H=n(153),Q=n(152),V=n(69),$=n.n(V),K="Continue",X=function(t){var e=t.connection;return Object(x.jsx)(p.a,{className:$.a.button,variant:"outlined",color:"primary",component:u.b,to:ft(t.dtId,e.dstId),children:I(e.text||K)})},Z=n(154),G=function(t){var e=Object(o.useState)(t),n=Object(d.a)(e,2),i=n[0],r=n[1];return[i,r,function(t){var e=t.target;e&&r(Object(s.a)(Object(s.a)({},i),{},Object(y.a)({},e.name,e.value)))}]};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(T||(T={}));var tt,et=function(t){var e=Object(o.useContext)(E)[1],n=t.step?{id:t.step.id,text:t.step.text}:{id:"",text:""},r=G(n),c=Object(d.a)(r,3),a=c[0],s=(c[1],c[2]);return Object(x.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),a.id){var o={id:a.id,text:a.text,connections:t.step?t.step.connections:[]};e({type:i.UpsertStep,payload:{dtId:t.dtId,step:o}})}},noValidate:!0,autoComplete:"off",children:[Object(x.jsx)("div",{children:Object(x.jsx)(Z.a,{id:"standard-basic",label:"ID",name:"id",value:a.id,onChange:s})}),Object(x.jsx)("div",{children:Object(x.jsx)(Z.a,{id:"standard-basic",label:"Text",name:"text",value:a.text,onChange:s})}),Object(x.jsx)(p.a,{type:"submit",children:"Submit"})]})},nt=n(70),it=n.n(nt),ot=function(t){var e,n=t.step,i=Object(o.useState)(!1),r=Object(d.a)(i,2),c=r[0],a=r[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)(q.a,{children:[Object(x.jsxs)(Q.a,{children:[Object(x.jsxs)(h.a,{className:"span",color:"textSecondary",gutterBottom:!0,children:["id: ",n.id]}),Object(x.jsx)(h.a,{component:"h2",variant:"h5",children:I(n.text)})]}),Object(x.jsxs)(H.a,{className:it.a.grid,children:[null===(e=n.connections)||void 0===e?void 0:e.map((function(e){return Object(x.jsx)(X,{connection:e,dtId:t.dtId},e.dstId)})),Object(x.jsx)(p.a,{className:"mutation",onClick:function(){return a((function(t){return!t}))},children:"Edit Step"})]})]}),c&&Object(x.jsx)(et,{type:T.Edit,dtId:t.dtId,step:t.step})]})};!function(t){t[t.Add=0]="Add",t[t.Edit=1]="Edit"}(tt||(tt={}));var rt=function(t){var e=Object(o.useContext)(E)[1],n=t.initialState||{id:"",text:"",conText:""},r=G(n),c=Object(d.a)(r,3),a=c[0],s=c[1],l=c[2];return Object(x.jsxs)("form",{onSubmit:t.type===tt.Add?function(o){if(o.preventDefault(),a.id){var r={id:a.id,text:a.text,connections:[]},c={dstId:r.id,text:a.conText};e({type:i.UpsertStep,payload:{dtId:t.dtId,step:r}}),e({type:i.UpsertConnection,payload:{dtId:t.dtId,connection:c,srcId:t.parentStepId}}),s(n)}}:function(t){t.preventDefault()},noValidate:!0,autoComplete:"off",children:[Object(x.jsx)("div",{children:Object(x.jsx)(Z.a,{id:"standard-basic",label:"ID",name:"id",value:a.id,onChange:l})}),Object(x.jsx)("div",{children:Object(x.jsx)(Z.a,{id:"standard-basic",label:"Text",name:"text",value:a.text,onChange:l})}),Object(x.jsx)("div",{children:Object(x.jsx)(Z.a,{id:"standard-basic",label:"Connection Text",name:"conText",value:a.conText,onChange:l})}),Object(x.jsx)(p.a,{type:"submit",children:"Submit"})]})},ct=function(){var t=Object(z.g)(),e=t.dtId,n=t.stepId,i=Object(o.useContext)(E),r=Object(d.a)(i,1)[0],c=Object(o.useState)(!1),a=Object(d.a)(c,2),s=a[0],l=a[1];if(!e)return null;var j=C(r,e,n||"root");return Object(x.jsxs)("div",{children:[Object(x.jsx)(ot,{dtId:e,step:j}),Object(x.jsxs)("div",{style:{marginTop:"1rem"},className:"center-children",children:[Object(x.jsx)(p.a,{component:u.b,to:ft(e,"root"),endIcon:Object(x.jsx)(Y.a,{}),children:"Reset"}),Object(x.jsx)(p.a,{className:"mutation",disabled:!0,children:"Add Connection"}),Object(x.jsx)(p.a,{className:"mutation",onClick:function(){return l((function(t){return!t}))},children:"Add Step"}),s&&Object(x.jsx)(rt,{type:tt.Add,dtId:e,parentStepId:j.id})]})]})},at=n(78),st=(n(107),function(){return Object(x.jsx)("div",{className:"readme",children:Object(x.jsx)("article",{children:Object(x.jsx)(at.a,{escapeHtml:!1,children:"# Decision Tree App\n\n## What is a decision tree?\n\nA decision tree (DT) is a decision support tool that uses a tree-like model of decisions and\ntheir possible consequences, including chance event outcomes, resource costs, and utility.\nIt is one way to display an algorithm that only contains conditional control statements.\n([read more](https://en.wikipedia.org/wiki/Decision_tree))\n\nHere is a quick examlpe: The diagram below shows a decision tree which predicts how\nto make the journey to work (\"Journey to Work\")\n\n[![journey to work decision tree](/images/journey-to-work.png)](/dt/work-journey)\n\n\n## Entities\nEach decision tree here is made up of nodes (leaf) and connections (branch)\n\n\n## Examples\nCurrently this web app is in a read only mode. You can load in new decision trees by writing\n[YAML](https://github.com/Animosity/CraftIRC/wiki/Complete-idiot%27s-introduction-to-yaml) specifications\nand using the [upload form here](/upload).\n\nBelow is how the cat DT example is added.\n\n```\ntitle: cat\ndescription: my cat's thought process\nsteps:\n  root:\n    text: Is that for me?\n    connections:\n      - dstId: noCare\n        text: yes\n      - dstId: youWrong\n        text: no.\n  noCare:\n    text: I don't want it.\n  youWrong:\n    text: That's for me.\n```\n\n## TODO list\n\n- [ ] mermaid.js for visualizing trees\n- [ ] need a name\n- [ ] add a more sohpisticated dt.\n- [ ] auto list samples in upload.\n- [ ] description on homepage?\n- [x] mobile friendly\n  - use native CSS grids\n- [x] add real id to DT\n- load from (yaml/json) file\n- [x] add data loading\n- [ ] add tooling to create new DT (CLI or UI)\n- [x] improve state management\n- [ ] improve UI\n  - [x] mobile ready\n  - material-ui\n- better connection/DT visualization\n- [ ] re-enable mutations\n  - editing steps and connections\n  - adding steps and connections\n"})})})}),dt=function(t){return Object(x.jsx)(q.a,{className:"root",children:Object(x.jsx)(u.b,{to:ft(t.dtId,"root"),children:Object(x.jsxs)(Q.a,{children:[Object(x.jsx)(h.a,{className:"title",color:"textSecondary",gutterBottom:!0,children:I(t.dt.title)}),Object(x.jsx)(h.a,{component:"h2",variant:"h5",children:I(t.dt.description)})]})})})},lt=n(75),ut=n.n(lt),jt=function(){var t=Object(o.useContext)(E),e=Object(d.a)(t,1)[0];return Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:["Is this your first time here and don't know what a decision tree is?"," "," Take a look at our README page."]}),Object(x.jsx)("div",{className:ut.a.grid,children:e.sort((function(t,e){return t.id.localeCompare(e.id)})).map((function(t,e){return Object(x.jsx)(dt,{dt:t,dtId:t.id},e)}))})]})},pt=n(76),bt=n.n(pt),ht=function(){var t=Object(o.useContext)(E)[1],e=Object(o.useState)(""),n=Object(d.a)(e,2),r=n[0],c=n[1],a=Object(o.useState)(""),s=Object(d.a)(a,2),l=s[0],j=s[1];return Object(x.jsxs)("div",{className:bt.a.base,children:[l&&Object(x.jsx)("p",{children:l}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Find sample YAML files here:"}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(u.b,{to:"/samples/cat.yaml",target:"_blank",children:"cat.yaml"})}),Object(x.jsx)("li",{children:Object(x.jsx)(u.b,{to:"/samples/dog.yaml",target:"_blank",children:"dog.yaml"})})]})]}),Object(x.jsxs)("form",{className:"center-children",children:[Object(x.jsx)("input",{accept:".json,.yaml",hidden:!0,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){var n=e.target,o=new FileReader;if(n.files&&n.files.length>0){var r=n.files[0];r.name.endsWith(".json")||r.name.endsWith(".yaml")?(o.onload=function(e){var n=e.target.result;try{n=r.name.endsWith(".yaml")?B.a.load(n):JSON.parse(n),n=Object(g.validateAndSetup)(n)}catch(e){return console.error(e),void j("Failed to add the decisoin tree, check the specifications.")}var o=n;c(JSON.stringify(n,null,2)),function(e){t({type:i.InsertDT,payload:{dt:e}})}(o),j("Decision tree added.")},o.readAsText(r)):j("Unsupported file. JSON & YAML are the only supported formats.")}}}),Object(x.jsx)("label",{htmlFor:"contained-button-file",children:Object(x.jsx)(p.a,{variant:"contained",color:"primary",component:"span",children:"Upload"})})]}),r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("hr",{}),Object(x.jsx)("pre",{children:r})]})]})},ft=function(t,e){return"/dt/".concat(t,"/step/").concat(e)},Ot=function(){return Object(x.jsxs)(z.c,{children:[Object(x.jsx)(z.a,{path:"/readme",element:Object(x.jsx)(st,{})}),Object(x.jsx)(z.a,{element:Object(x.jsx)(jt,{}),path:"/"}),Object(x.jsx)(z.a,{element:Object(x.jsx)(ht,{}),path:"/upload"}),Object(x.jsx)(z.a,{element:Object(x.jsx)(ct,{}),path:"/follow/dt/:dtId/step/:stepId"}),Object(x.jsx)(z.a,{element:Object(x.jsx)(ct,{}),path:"/follow/:dtId"}),Object(x.jsx)(z.a,{element:Object(x.jsx)(ct,{}),path:"/dt/:dtId/step/:stepId"}),Object(x.jsx)(z.a,{element:Object(x.jsx)(ct,{}),path:"/dt/:dtId/"})]})},xt=n(77),mt=n.n(xt),vt=function(){var t=Object(o.useContext)(E),e=Object(d.a)(t,2),n=e[0],r=e[1],c=Object(o.useState)({err:"",isLoading:0===n.length}),a=Object(d.a)(c,2),u=a[0],j=a[1];return Object(o.useEffect)((function(){R().then((function(t){r({type:i.InsertDTs,payload:{dts:t}})})).catch((function(t){console.error(t),j((function(t){return Object(s.a)(Object(s.a)({},t),{},{err:"failed to load intial decistion trees"})}))})).finally((function(){j((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1})}))}))}),[r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(m,{}),Object(x.jsxs)("div",{className:mt.a.content,children:[Object(x.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!u.err,autoHideDuration:6e3,message:u.err}),0===n.length?"Loading":Object(x.jsx)(Ot,{})]})]})},yt=function(){return Object(x.jsx)(u.a,{basename:"",children:Object(x.jsx)(_,{children:Object(x.jsx)(vt,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(x.jsx)(yt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},35:function(t,e){t.exports={validateAndSetup:function(t){var e=new Error("bad schema");if(void 0!==["id","title","description","steps"].find((function(e){return!t.hasOwnProperty(e)})))throw e;if("object"!==typeof t.steps)throw e;if(void 0===t.steps.root)throw e;if(!t.id.match(/^[a-z0-9]+(?:-[a-z0-9]+)*$/))throw e;return Object.keys(t.steps).forEach((function(n){if(t.steps[n].connections=t.steps[n].connections||[],t.steps[n].id=n,void 0!==["id","text","connections"].find((function(e){return!t.steps[n].hasOwnProperty(e)})))throw e;t.steps[n].connections.forEach((function(n){if(void 0!==["dstId"].find((function(t){return!n.hasOwnProperty(t)})))throw e;if(!(n.dstId in t.steps))throw e}))})),t}}},61:function(t,e,n){t.exports={root:"NavBar_root__33QtF",title:"NavBar_title__3wIk0"}},69:function(t,e,n){t.exports={button:"Connection_button__2jUvQ"}},70:function(t,e,n){t.exports={grid:"Step_grid__1qgaB"}},75:function(t,e,n){t.exports={grid:"Trees_grid__2Z_-A"}},76:function(t,e,n){t.exports={base:"Upload_base__2TmXW"}},77:function(t,e,n){t.exports={content:"App_content__1Wt3K"}},95:function(t,e,n){}},[[109,1,2]]]);